<!doctype html>
<html lang="{{ invoice.get('bill_lang', 'en') }}">
  <head>
    <meta charset="utf-8" />
    <style{% if csp_nonce %} nonce="{{ csp_nonce }}"{% endif %}>
      @font-face {
        font-family: 'Noto Sans';
        src: url('static/fonts/NotoSans-Regular.ttf') format('truetype');
        font-weight: 400;
      }
      @font-face {
        font-family: 'Noto Sans';
        src: url('static/fonts/NotoSans-Bold.ttf') format('truetype');
        font-weight: 700;
      }
      @font-face {
        font-family: 'Noto Sans Devanagari';
        src: url('static/fonts/NotoSansDevanagari-Regular.ttf') format('truetype');
        font-weight: 400;
      }
      @font-face {
        font-family: 'Noto Sans Devanagari';
        src: url('static/fonts/NotoSansDevanagari-Bold.ttf') format('truetype');
        font-weight: 700;
      }
      @font-face {
        font-family: 'Noto Sans Gujarati';
        src: url('static/fonts/NotoSansGujarati-Regular.ttf') format('truetype');
        font-weight: 400;
      }
      @font-face {
        font-family: 'Noto Sans Gujarati';
        src: url('static/fonts/NotoSansGujarati-Bold.ttf') format('truetype');
        font-weight: 700;
      }
      body {
        color: #000;
        background: #fff;
        font-family: 'Noto Sans', 'Noto Sans Devanagari', 'Noto Sans Gujarati', sans-serif;
      }
      a:focus, button:focus { outline: 2px solid #005fcc; }
    </style>
  </head>
  <body>
    {% set _labels = {
      'en': {'invoice':'Invoice','subtotal':'Subtotal','total':'Total','qty':'Qty','rate':'Rate'},
      'hi': {'invoice':'चालान','subtotal':'उप-योग','total':'कुल','qty':'मात्रा','rate':'दर'},
      'gu': {'invoice':'ચલણ','subtotal':'ઉપકુલ','total':'કુલ','qty':'જથ્થો','rate':'દર'}
    } %}
    {% set _lang = invoice.get('bill_lang', 'en') %}
    {% set L = _labels.get(_lang, _labels['en']) %}
    <h1>{{ L.invoice }} #{{ invoice['number'] }}</h1>
    {% if invoice['gst_mode'] != 'unreg' and invoice.get('gstin') %}
      <p>GSTIN: {{ invoice['gstin'] }}{% if composition_scheme or invoice['gst_mode'] == 'comp' %} (Composition Scheme){% endif %}</p>
    {% endif %}
    {% if invoice.get('fssai') %}
      <!-- Optional FSSAI license number -->
      <p>FSSAI: {{ invoice['fssai'] }}</p>
    {% endif %}
    {% if invoice.get('show_fssai_logo') %}
      <!-- Optional FSSAI logo -->
      <p>FSSAI Logo</p>
    {% endif %}
    <table aria-label="Invoice items">
      <tr>
        <th>Item</th>
        <th>{{ L.qty }}</th>
        <th>{{ L.rate }}</th>
        {% if invoice['gst_mode'] == 'reg' %}<th>GST%</th><th>HSN</th>{% endif %}
      </tr>
      {% for item in invoice['items'] %}
      <tr>
        <td>{{ item.name }}</td>
        <td>{{ item.qty }}</td>
        <td>{{ item.price }}</td>
        {% if invoice['gst_mode'] == 'reg' %}<td>{{ item.gst or '' }}</td><td>{{ item.hsn or '' }}</td>{% endif %}
      </tr>
      {% endfor %}
    </table>
    <p>{{ L.subtotal }}: {{ invoice['subtotal'] }}</p>
    {% if invoice['gst_mode'] == 'reg' %}
      {% for line in invoice['tax_lines'] %}
      <p>{{ line.label }}: {{ line.amount }}</p>
      {% endfor %}
    {% endif %}
    {% if invoice.get('rounding_adjustment') %}
      <p>Rounding Adj.: {{ invoice['rounding_adjustment'] }}</p>
    {% endif %}
    <p>{{ L.total }}: {{ invoice['grand_total'] }}</p>
    {% if invoice['gst_mode'] == 'comp' %}
      <p>Composition tax included</p>
    {% elif invoice['gst_mode'] == 'unreg' %}
      <p>Tax not applicable</p>
    {% endif %}
    <p style="font-size: 10px">
      <a href="/legal/terms">Terms</a> |
      <a href="/legal/refund">Refunds</a> |
      <a href="/legal/contact">Contact</a>
    </p>
  </body>
</html>
